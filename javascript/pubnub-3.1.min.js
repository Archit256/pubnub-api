function q(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function y(c){l.lastIndex=0;return l.test(c)?'"'+c.replace(l,function(c){var g=f[c];return typeof g==="string"?g:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function u(c,f){var g,h,k,n,l=i,m,e=f[c];e&&typeof e==="object"&&typeof e.toJSON==="function"&&(e=e.toJSON(c));typeof o==="function"&&(e=o.call(f,c,e));switch(typeof e){case "string":return y(e);case "number":return isFinite(e)?String(e):"null";case "boolean":case "null":return String(e);
case "object":if(!e)return"null";i+=r;m=[];if(Object.prototype.toString.apply(e)==="[object Array]"){n=e.length;for(g=0;g<n;g+=1)m[g]=u(g,e)||"null";k=m.length===0?"[]":i?"[\n"+i+m.join(",\n"+i)+"\n"+l+"]":"["+m.join(",")+"]";i=l;return k}if(o&&typeof o==="object"){n=o.length;for(g=0;g<n;g+=1)h=o[g],typeof h==="string"&&(k=u(h,e))&&m.push(y(h)+(i?": ":":")+k)}else for(h in e)Object.hasOwnProperty.call(e,h)&&(k=u(h,e))&&m.push(y(h)+(i?": ":":")+k);k=m.length===0?"{}":i?"{\n"+i+m.join(",\n"+i)+"\n"+
l+"}":"{"+m.join(",")+"}";i=l;return k}}window.JSON||(window.JSON={});if(typeof String.prototype.toJSON!=="function")String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,r,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;typeof JSON.stringify!=="function"&&(JSON.stringify=function(c,
f,g){var h;r=i="";if(typeof g==="number")for(h=0;h<g;h+=1)r+=" ";else typeof g==="string"&&(r=g);if((o=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw Error("JSON.stringify");return u("",{"":c})});typeof JSON.parse!=="function"&&(JSON.parse=function(c){return eval("("+c+")")})}();
window.PUBNUB||function(){function y(a){var b={},d=a.publish_key||"demo",s=a.subscribe_key||"demo",t=a.ssl?"s":"",v="http"+t+"://"+(a.origin||"pubsub.pubnub.com"),p={history:function(a,b){var b=a.callback||b,d=a.limit||100,j=a.channel,c=e();if(!j)return f("Missing Channel");if(!b)return f("Missing Callback");w({c:c,url:[v,"history",s,z(j),c,d],b:function(a){b(a)},a:function(a){f(a)}})},time:function(a){var b=e();w({c:b,url:[v,"time",b],b:function(b){a(b[0])},a:function(){a(0)}})},uuid:function(a){var b=
e();w({c:b,url:["http"+t+"://pubnub-prod.appspot.com/uuid?callback="+b],b:function(b){a(b[0])},a:function(){a(0)}})},analytics:function(a){var b=e(),c=a.limit||100,j=a.ago||0,f=a.duration||100,v=a.callback;w({c:b,b:function(a){v(a)},a:function(){v(0)},url:[["http"+t+"://pubnub-prod.appspot.com/analytics-channel?callback="+b,"sub-key="+s,"pub-key="+d,"channel="+z(a.channel||""),"limit="+c,"ago="+j,"duration="+f].join("&")]})},publish:function(a,b){var b=b||a.callback||q(),c=a.message,j=a.channel,t=
e();if(!c)return f("Missing Message");if(!j)return f("Missing Channel");if(!d)return f("Missing Publish Key");c=JSON.stringify(c);c=[v,"publish",d,s,0,z(j),t,z(c)];if(c.join().length>1800)return f("Message Too Big");w({c:t,b:function(a){b(a)},a:function(){b([0,"Disconnected"])},url:c})},unsubscribe:function(a){a=a.channel;if(a in b)b[a].d=0,b[a].e&&b[a].e(0)},subscribe:function(a,d){function t(){var a=e();if(b[j].d)b[j].e=w({c:a,url:[r,"subscribe",s,z(j),a,h],a:function(){k||(k=1,n());setTimeout(t,
A);p.time(function(a){a||i()})},b:function(a){b[j].d&&(o||(o=1,l()),k&&(k=0,m()),g=C.set(s+j,h=g&&C.get(s+j)||a[1]),c(a[0],function(b){d(b,a)}),setTimeout(t,10))}})}var j=a.channel,d=d||a.callback,g=a.restore,h=0,i=a.error||q(),l=a.connect||q(),m=a.reconnect||q(),n=a.disconnect||q(),k=0,o=0,r=N(v);if(!D)return I.push([a,d,p]);if(!j)return f("Missing Channel");if(!d)return f("Missing Callback");if(!s)return f("Missing Subscribe Key");j in b||(b[j]={});if(b[j].d)return f("Already Connected");b[j].d=
1;t()},db:C,each:c,map:G,css:H,$:r,create:m,bind:h,supplant:g,head:k,search:o,attr:n,now:l,unique:u,events:B,updater:i,init:y};return p}function u(){return"x"+ ++O+""+ +new Date}function l(){return+new Date}function i(a,b){function d(){c+b>l()?(clearTimeout(s),s=setTimeout(d,b)):(c=l(),a())}var s,c=0;return d}function r(a){return document.getElementById(a)}function f(a){console.log(a)}function o(a,b){var d=[];c(a.split(/\s+/),function(a){c((b||document).getElementsByTagName(a),function(a){d.push(a)})});
return d}function c(a,b){if(a&&b)if(typeof a[0]!="undefined")for(var d=0,c=a.length;d<c;)b.call(a[d],a[d],d++);else for(d in a)a.hasOwnProperty&&a.hasOwnProperty(d)&&b.call(a[d],d,a[d])}function G(a,b){var d=[];c(a||[],function(a,c){d.push(b(a,c))});return d}function g(a,b){return a.replace(P,function(a,c){return b[c]||a})}function h(a,b,d){c(a.split(","),function(a){function c(a){if(!a)a=window.event;if(!d(a))a.cancelBubble=true,a.returnValue=false,a.preventDefault&&a.preventDefault(),a.stopPropagation&&
a.stopPropagation()}b.addEventListener?b.addEventListener(a,c,false):b.attachEvent?b.attachEvent("on"+a,c):b["on"+a]=c})}function k(){return o("head")[0]}function n(a,b,d){if(d)a.setAttribute(b,d);else return a&&a.getAttribute&&a.getAttribute(b)}function H(a,b){for(var d in b)if(b.hasOwnProperty(d))try{a.style[d]=b[d]+("|width|height|top|left|".indexOf(d)>0&&typeof b[d]=="number"?"px":"")}catch(c){}}function m(a){return document.createElement(a)}function e(){return E||p()?0:u()}function z(a){return G(encodeURIComponent(a).split(""),
function(a){return"-_.!~*'()".indexOf(a)<0?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function w(a){function b(a,b){if(!f)f=1,a||i(b),d.onerror=null,clearTimeout(g),setTimeout(function(){a&&h();var b=r(e),d=b&&b.parentNode;d&&d.removeChild(b)},A)}if(E||p())return Q(a);var d=m("script"),c=a.c,e=u(),f=0,g=setTimeout(function(){b(1)},F),h=a.a||q(),i=a.b||q();window[c]=function(a){b(0,a)};d[J]=J;d.onerror=function(){b(1)};d.src=a.url.join(K);n(d,"id",e);k().appendChild(d);return b}function Q(a){function b(a){if(!e){e=
1;clearTimeout(g);if(c)c.onerror=c.onload=null,c.abort&&c.abort(),c=null;a&&h()}}function d(){if(!f){f=1;clearTimeout(g);try{response=JSON.parse(c.responseText)}catch(a){return b(1)}i(response)}}var c,e=0,f=0,g=setTimeout(function(){b(1)},F),h=a.a||q(),i=a.b||q();try{c=p()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,c.onerror=c.onabort=function(){b(1)},c.onload=c.onloadend=d,c.timeout=F,c.open("GET",a.url.join(K),true),c.send()}catch(k){return b(0),E=0,w(a)}return b}function L(){PUBNUB.time(l);
PUBNUB.time(function(){setTimeout(function(){D||(D=1,c(I,function(a){a[2].subscribe(a[0],a[1])}))},A)})}function p(){if(!M.get)return 0;var a={id:p.id++,send:q(),abort:function(){a.id={}},open:function(b,c){p[a.id]=a;M.get(a.id,c)}};return a}window.console||(window.console=window.console||{});console.log||(console.log=(window.opera||{}).postError||q());var C=function(){var a=window.localStorage;return{get:function(b){return a?a.getItem(b):document.cookie.indexOf(b)==-1?null:((document.cookie||"").match(RegExp(b+
"=([^;]+)"))||[])[1]||null},set:function(b,c){if(a)return a.setItem(b,c)&&0;document.cookie=b+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}}}(),O=1,P=/{([\w\-]+)}/g,J="async",K="/",F=14E4,A=1E3,E=navigator.userAgent.indexOf("MSIE 6")==-1,N=function(){var a=Math.floor(Math.random()*9)+1;return function(b){return b.indexOf("pubsub")>0&&b.replace("pubsub","ps"+(++a<10?a:a=1))||b}}(),B={list:{},unbind:function(a){B.list[a]=[]},bind:function(a,b){(B.list[a]=B.list[a]||[]).push(b)},fire:function(a,
b){c(B.list[a]||[],function(a){a(b)})}},x=r("pubnub")||{},D=0,I=[];PUBNUB=y({publish_key:n(x,"pub-key"),subscribe_key:n(x,"sub-key"),ssl:n(x,"ssl")=="on",origin:n(x,"origin")});H(x,{position:"absolute",top:-A});if("opera"in window||n(x,"flash"))x.innerHTML="<object id=pubnubs type=application/x-shockwave-flash width=1 height=1 data=https://dh15atwfs066y.cloudfront.net/pubnub.swf><param name=movie value=https://dh15atwfs066y.cloudfront.net/pubnub.swf /><param name=allowscriptaccess value=always /></object>";
var M=r("pubnubs")||{};h("load",window,function(){setTimeout(L,0)});PUBNUB.rdx=function(a,b){if(!b)return p[a].onerror();p[a].responseText=unescape(b);p[a].onload()};p.id=A;window.jQuery&&(window.jQuery.PUBNUB=PUBNUB);typeof module!=="undefined"&&(module.f=PUBNUB)&&L()}();
