function w(){return function(){}}
this.JSON||function(){function s(g){return g<10?"0"+g:g}function x(g){u.lastIndex=0;return u.test(g)?'"'+g.replace(u,function(q){var f=A[q];return typeof f==="string"?f:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function n(g,q){var f,h,o,t,d=i,a,b=q[g];if(b&&typeof b==="object"&&typeof b.toJSON==="function")b=b.toJSON(g);if(typeof r==="function")b=r.call(q,g,b);switch(typeof b){case "string":return x(b);case "number":return isFinite(b)?String(b):"null";case "boolean":case "null":return String(b);
case "object":if(!b)return"null";i+=v;a=[];if(Object.prototype.toString.apply(b)==="[object Array]"){t=b.length;for(f=0;f<t;f+=1)a[f]=n(f,b)||"null";o=a.length===0?"[]":i?"[\n"+i+a.join(",\n"+i)+"\n"+d+"]":"["+a.join(",")+"]";i=d;return o}if(r&&typeof r==="object"){t=r.length;for(f=0;f<t;f+=1){h=r[f];if(typeof h==="string")if(o=n(h,b))a.push(x(h)+(i?": ":":")+o)}}else for(h in b)if(Object.hasOwnProperty.call(b,h))if(o=n(h,b))a.push(x(h)+(i?": ":":")+o);o=a.length===0?"{}":i?"{\n"+i+a.join(",\n"+i)+
"\n"+d+"}":"{"+a.join(",")+"}";i=d;return o}}this.JSON={};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i,v,A={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;if(typeof JSON.stringify!=="function")JSON.stringify=function(g,q,f){var h;v=i="";if(typeof f==="number")for(h=0;h<f;h+=1)v+=" ";else if(typeof f==="string")v=f;if((r=q)&&typeof q!=="function"&&(typeof q!=="object"||typeof q.length!=="number"))throw Error("JSON.stringify");return n("",{"":g})};if(typeof JSON.parse!=="function")JSON.parse=function(g){return eval("("+g+")")}}();
this.PUBNUB||function(){this.console||(this.console=this.console||{});console.log||(console.log=(this.opera||{}).postError||w());function s(){return++x+""+ +new Date}var x=1;function n(a){console.log(a)}function u(a){var b=[];i(a.split(/\s+/),function(c){i(document.getElementsByTagName(c),function(e){b.push(e)})});return b}function i(a,b){if(a&&b)if(a[0])for(var c=0,e=a.length;c<e;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function v(a,b){b.call(a,
a);for(a=a.firstChild;a;){v(a,b);a=a.nextSibling}}var A=/\${([\w\-]+)}/g;function r(a,b,c){function e(l){if(!l)l=window.event;if(!c(l)){l.cancelBubble=true;l.returnValue=false;if(l.stopPropagation){l.stopPropagation();l.preventDefault()}}}if(b.addEventListener)b.addEventListener(a,e,false);else if(b.attachEvent)b.attachEvent("on"+a,e);else b["on"+a]=e}function g(){return u("head")[0]}function q(a,b){if(!a)return"";var c=[],e="";for(e in a)c.push(escape(e)+"="+escape(a[e]));return(b.indexOf("?")===
-1?"?":"&")+c.join("&")}function f(a){return document.createElement(a)}function h(a){var b=f("script"),c="x"+s(),e=100,l=setTimeout(function(){k("timeout")},a.timeout||3E4),y=a.data||{},z=a.b||w(),j=a.c||w();function m(){setTimeout(function(){e*=2;try{var p=g(),B=p.firstChild;B?p.insertBefore(b,B):p.appendChild(b)}catch(C){m()}},e)}function k(p){clearTimeout(l);if(b){p&&z.call(p,b,unescape(b.src));b.onerror=null;try{g().removeChild(b)}catch(B){}}}b.async="async";this[c]=function(p){if(!p)return k("no data");
j.call(b,p);this[c]=null;k(0)};r("error",b,function(){k("error")});y.unique=c;b.src=a.url+q(y,a.url);m();return k}var o="http://{{ORIGIN}}/",t=this.WebSocket,d={history:function(a,b){b=b||w();a.limit=a.limit||10;if(!a.channel)return n("Must Specify a Channel");a.channel=d.d+"/"+a.channel;h({url:o+"pubnub-history",data:a,c:function(c){b(c.messages)},b:function(c){n(c)}})},time:function(a){h({url:o+"pubnub-time",c:function(b){a(b.time)},b:function(){a(0)}})},uuid:function(a){h({url:o+"pubnub-uuid",
c:function(b){a(b.uuid)},b:function(){a(0)}})},publish:function(a,b){b=b||w()||a.callback;var c=a.message;if(!c)return n("Must Specify a Message");if(!a.channel)return n("Must Specify a Channel");c=JSON.stringify(c);if(c.length>1700)return n("Message exceeded limit 1700");if(!d.g)return n("Missing Publish Key");a.publish_key=d.g;a.channel=d.d+"/"+a.channel;a.message=c;h({url:o+"pubnub-publish",data:a,c:function(e){b(e)},b:function(e){b(e)}})},unsubscribe:function(a){a=d.d+"/"+a.channel;if(a in d.a){d.a[a].disabled=
1;d.a[a].e=0;d.a[a].f&&d.a[a].f(0);d.a[a].h&&d.a[a].h.close()}},subscribe:function(a,b){function c(){setTimeout(function(){z*=2;h({url:o+"pubnub-subscribe",data:a,c:function(m){if(m&&m.server)t?e(m.server):l(m.server);else c()},b:function(){c()}})},z)}function e(m){if(!(j in d.a&&d.a[j].disabled)){m=m.split(":");var k=new t("ws://"+m[0]+":881"+m[1].slice(-1));k.onopen=function(){k.send(j)};k.onmessage=function(p){b(JSON.parse(p.data))};k.onclose=function(){if(j in d.a&&!d.a[j].disabled){z=100;c()}};
d.a[j].h=k}}function l(m){if(!(j in d.a&&d.a[j].disabled))d.a[j].f=h({url:"http://"+m,data:{channel:j,timetoken:y},c:function(k){y=k.timetoken;l(m);k.messages[0]!="xdr.timeout"&&i(k.messages,function(p){b(p)})},b:function(k){k=="timeout"?l(m):c()}})}if(!a.channel)return n("Must Specify a Channel");b=b||a.callback;if(!b)return n("Must Specify a Callback");if(!d.d)return n("Missing Subscribe Key");var y=1,z=100,j=a.channel=d.d+"/"+a.channel;j in d.a||(d.a[j]={});if(d.a[j].e)return n("Already Connected to this Channel: "+
j);d.a[j].disabled=0;d.a[j].e=1;c()},g:"{{pub_key}}",d:"{{sub_key}}",i:"{{app_key}}",a:{},each:i,map:function(a,b){var c=[];i(a||[],function(e,l){c.push(b(e,l))});return c},css:function(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0?"px":"")}catch(e){}},$:function(a){return document.getElementById(a)},create:f,bind:r,supplant:function(a,b){return a.replace(A,function(c,e){return""+b[e]||""})},head:g,search:u,attr:function(a,b,c){if(c)a.setAttribute(b,
c);else return a.getAttribute&&a.getAttribute(b)},now:s};this.jQuery&&(this.jQuery.PUBNUB=d);this.PUBNUB=d}();
