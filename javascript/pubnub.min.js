function w(){return function(){}}
this.JSON||function(){function t(g){return g<10?"0"+g:g}function x(g){s.lastIndex=0;return s.test(g)?'"'+g.replace(s,function(k){var e=A[k];return typeof e==="string"?e:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function o(g,k){var e,h,l,d,a=p,c,b=k[g];if(b&&typeof b==="object"&&typeof b.toJSON==="function")b=b.toJSON(g);if(typeof r==="function")b=r.call(k,g,b);switch(typeof b){case "string":return x(b);case "number":return isFinite(b)?String(b):"null";case "boolean":case "null":return String(b);
case "object":if(!b)return"null";p+=u;c=[];if(Object.prototype.toString.apply(b)==="[object Array]"){d=b.length;for(e=0;e<d;e+=1)c[e]=o(e,b)||"null";l=c.length===0?"[]":p?"[\n"+p+c.join(",\n"+p)+"\n"+a+"]":"["+c.join(",")+"]";p=a;return l}if(r&&typeof r==="object"){d=r.length;for(e=0;e<d;e+=1){h=r[e];if(typeof h==="string")if(l=o(h,b))c.push(x(h)+(p?": ":":")+l)}}else for(h in b)if(Object.hasOwnProperty.call(b,h))if(l=o(h,b))c.push(x(h)+(p?": ":":")+l);l=c.length===0?"{}":p?"{\n"+p+c.join(",\n"+p)+
"\n"+a+"}":"{"+c.join(",")+"}";p=a;return l}}this.JSON={};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var v=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p,u,A={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;if(typeof JSON.stringify!=="function")JSON.stringify=function(g,k,e){var h;u=p="";if(typeof e==="number")for(h=0;h<e;h+=1)u+=" ";else if(typeof e==="string")u=e;if((r=k)&&typeof k!=="function"&&(typeof k!=="object"||typeof k.length!=="number"))throw Error("JSON.stringify");return o("",
{"":g})};if(typeof JSON.parse!=="function")JSON.parse=function(g,k){function e(l,d){var a,c,b=l[d];if(b&&typeof b==="object")for(a in b)if(Object.hasOwnProperty.call(b,a)){c=e(b,a);if(c!==undefined)b[a]=c;else delete b[a]}return k.call(l,d,b)}var h;g=String(g);v.lastIndex=0;if(v.test(g))g=g.replace(v,function(l){return"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){h=eval("("+g+")");return typeof k==="function"?e({"":h},""):h}throw new SyntaxError("JSON.parse");}}();
this.PUBNUB||function(){this.console||(this.console=this.console||{});console.log||(console.log=(this.opera||{}).postError||w());function t(){return++x+""+ +new Date}var x=1;function o(a){console.log(a)}function v(a){var c=[];s(a.split(/\s+/),function(b){s(document.getElementsByTagName(b),function(f){c.push(f)})});return c}function s(a,c){if(a&&c)if(a[0])for(var b=0,f=a.length;b<f;)c.call(a[b],a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&c.call(a[b],b,a[b])}function p(a,c){c.call(a,
a);for(a=a.firstChild;a;){p(a,c);a=a.nextSibling}}var u=/\${([\w\-]+)}/g;function A(a,c,b){function f(m){if(!m)m=window.event;if(!b(m)){m.cancelBubble=true;m.returnValue=false;if(m.stopPropagation){m.stopPropagation();m.preventDefault()}}}if(c.addEventListener)c.addEventListener(a,f,false);else if(c.attachEvent)c.attachEvent("on"+a,f);else c["on"+a]=f}function r(){return v("head")[0]}function g(a,c){if(!a)return"";var b=[],f="";for(f in a)b.push(escape(f)+"="+escape(a[f]));return(c.indexOf("?")===
-1?"?":"&")+b.join("&")}function k(a){return document.createElement(a)}function e(a){var c=k("script"),b="x"+t(),f=100,m=setTimeout(function(){j("timeout")},a.timeout||3E4),y=a.data||{},z=a.b||w(),i=a.c||w();function n(){setTimeout(function(){f*=2;try{var q=r(),B=q.firstChild;B?q.insertBefore(c,B):q.appendChild(c)}catch(C){n()}},f)}function j(q){clearTimeout(m);if(c){q&&z.call(q,c,unescape(c.src));c.onerror=null;try{r().removeChild(c)}catch(B){}}}c.async="async";this[b]=function(q){if(!q)return j("no data");
i.call(c,q);this[b]=null;j(0)};A("error",c,function(){j("error")});y.unique=b;c.src=a.url+g(y,a.url);n();return j}var h="http://{{ORIGIN}}/",l=this.WebSocket,d={history:function(a,c){c=c||w();a.limit=a.limit||10;if(!a.channel)return o("Must Specify a Channel");a.channel=d.d+"/"+a.channel;e({url:h+"pubnub-history",data:a,c:function(b){c(b.messages)},b:function(b){o(b)}})},time:function(a){e({url:h+"pubnub-time",c:function(c){a(c.time)},b:function(){a(0)}})},uuid:function(a){e({url:h+"pubnub-uuid",
c:function(c){a(c.uuid)},b:function(){a(0)}})},publish:function(a,c){c=c||w()||a.callback;var b=a.message;if(!b)return o("Must Specify a Message");if(!a.channel)return o("Must Specify a Channel");b=JSON.stringify(b);if(b.length>1700)return o("Message exceeded limit 1700");if(!d.g)return o("Missing Publish Key");a.publish_key=d.g;a.channel=d.d+"/"+a.channel;a.message=b;e({url:h+"pubnub-publish",data:a,c:function(f){c(f)},b:function(f){c(f)}})},unsubscribe:function(a){a=d.d+"/"+a.channel;if(a in d.a){d.a[a].disabled=
1;d.a[a].e=0;d.a[a].f&&d.a[a].f(0);d.a[a].h&&d.a[a].h.close()}},subscribe:function(a,c){function b(){setTimeout(function(){z*=2;e({url:h+"pubnub-subscribe",data:a,c:function(n){if(n&&n.server)l?f(n.server):m(n.server);else b()},b:function(){b()}})},z)}function f(n){if(!(i in d.a&&d.a[i].disabled)){n=n.split(":");var j=new l("ws://"+n[0]+":881"+n[1].slice(-1));j.onopen=function(){j.send(i)};j.onmessage=function(q){c(JSON.parse(q.data))};j.onclose=function(){if(i in d.a&&!d.a[i].disabled){z=100;b()}};
d.a[i].h=j}}function m(n){if(!(i in d.a&&d.a[i].disabled))d.a[i].f=e({url:"http://"+n,data:{channel:i,timetoken:y},c:function(j){y=j.timetoken;m(n);j.messages[0]!="xdr.timeout"&&s(j.messages,function(q){c(q)})},b:function(j){j=="timeout"?m(n):b()}})}if(!a.channel)return o("Must Specify a Channel");c=c||a.callback;if(!c)return o("Must Specify a Callback");if(!d.d)return o("Missing Subscribe Key");var y=1,z=100,i=a.channel=d.d+"/"+a.channel;i in d.a||(d.a[i]={});if(d.a[i].e)return o("Already Connected to this Channel: "+
i);d.a[i].disabled=0;d.a[i].e=1;b()},g:"{{pub_key}}",d:"{{sub_key}}",i:"{{app_key}}",a:{},each:s,map:function(a,c){var b=[];s(a||[],function(f,m){b.push(c(f,m))});return b},css:function(a,c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+("|width|height|top|left|".indexOf(b)>0?"px":"")}catch(f){}},$:function(a){return document.getElementById(a)},create:k,bind:A,supplant:function(a,c){return a.replace(u,function(b,f){return""+c[f]||""})},head:r,search:v,attr:function(a,c,b){if(b)a.setAttribute(c,
b);else return a.getAttribute&&a.getAttribute(c)},now:t};this.jQuery&&(this.jQuery.PUBNUB=d);this.PUBNUB=d}();
