function x(){return function(){}}
this.JSON||function(){function s(g){return g<10?"0"+g:g}function C(g){z.lastIndex=0;return z.test(g)?'"'+g.replace(z,function(p){var f=E[p];return typeof f==="string"?f:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function o(g,p){var f,l,m,A,y=i,k,d=p[g];if(d&&typeof d==="object"&&typeof d.toJSON==="function")d=d.toJSON(g);if(typeof r==="function")d=r.call(p,g,d);switch(typeof d){case "string":return C(d);case "number":return isFinite(d)?String(d):"null";case "boolean":case "null":return String(d);
case "object":if(!d)return"null";i+=B;k=[];if(Object.prototype.toString.apply(d)==="[object Array]"){A=d.length;for(f=0;f<A;f+=1)k[f]=o(f,d)||"null";m=k.length===0?"[]":i?"[\n"+i+k.join(",\n"+i)+"\n"+y+"]":"["+k.join(",")+"]";i=y;return m}if(r&&typeof r==="object"){A=r.length;for(f=0;f<A;f+=1){l=r[f];if(typeof l==="string")if(m=o(l,d))k.push(C(l)+(i?": ":":")+m)}}else for(l in d)if(Object.hasOwnProperty.call(d,l))if(m=o(l,d))k.push(C(l)+(i?": ":":")+m);m=k.length===0?"{}":i?"{\n"+i+k.join(",\n"+i)+
"\n"+y+"}":"{"+k.join(",")+"}";i=y;return m}}this.JSON={};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var z=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
i,B,E={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;if(typeof JSON.stringify!=="function")JSON.stringify=function(g,p,f){var l;B=i="";if(typeof f==="number")for(l=0;l<f;l+=1)B+=" ";else if(typeof f==="string")B=f;if((r=p)&&typeof p!=="function"&&(typeof p!=="object"||typeof p.length!=="number"))throw Error("JSON.stringify");return o("",{"":g})};if(typeof JSON.parse!=="function")JSON.parse=function(g){return eval("("+g+")")}}();
this.PUBNUB||function(){this.console||(this.console=this.console||{});console.log||(console.log=(this.opera||{}).postError||x());function s(){return++C+""+ +new Date}var C=1;function o(a){console.log(a)}function z(a){var b=[];i(a.split(/\s+/),function(c){i(document.getElementsByTagName(c),function(e){b.push(e)})});return b}function i(a,b){if(a&&b)if(typeof a[0]!="undefined")for(var c=0,e=a.length;c<e;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}
function B(a,b){b.call(a,a);for(a=a.firstChild;a;){B(a,b);a=a.nextSibling}}var E=/\$?{([\w\-]+)}/g;function r(a,b,c){function e(j){if(!j)j=window.event;if(!c(j)){j.cancelBubble=true;j.returnValue=false;if(j.stopPropagation){j.stopPropagation();j.preventDefault()}}}if(b.addEventListener)b.addEventListener(a,e,false);else if(b.attachEvent)b.attachEvent("on"+a,e);else b["on"+a]=e}function g(){return z("head")[0]}function p(a,b){if(!a)return"";var c=[],e="";for(e in a)c.push(escape(e)+"="+escape(a[e]));
return(b.indexOf("?")===-1?"?":"&")+c.join("&")}function f(a){return document.createElement(a)}var l=0;function m(a){if(l)return y(a);var b=f("script"),c="x"+s(),e=100,j=setTimeout(function(){D("timeout")},a.timeout||3E4),v=a.url,n=a.data||{},q=a.c||x(),w=a.b||x();function t(){setTimeout(function(){e*=2;try{var u=g(),F=u.firstChild;F?u.insertBefore(b,F):u.appendChild(b)}catch(G){t()}},e)}function D(u){clearTimeout(j);if(b){u&&q.call(u,b,unescape(b.src));b.onerror=null;try{g().removeChild(b)}catch(F){}}}
b.async="async";this[c]=function(u){if(!u)return D("no data");w.call(b,u);this[c]=null;D(0)};r("error",b,function(){D("error")});n.unique=c;b.src=v+p(n,v);t();return D}var A=/^this\[[^\]]+\]\((.+?)\)$/;function y(a){var b=window.h?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,c=a.c||x(),e=a.b||x(),j=0,v=a.data||{},n=a.url,q=setInterval(function(){if(b&&b.readyState==4&&!j){var t=b.status;j=1;if(q){clearInterval(q);q=null}t>=200&&t<300||t==304||t==1223?e(JSON.parse(b.responseText.replace(A,
"$1"))):c(b);b=null}},14);v.unique="x"+s();try{b.open("GET",n+p(v,n),true);b.send()}catch(w){l=0;return m(a)}return function(){j=1;b&&b.abort&&b.abort()}}var k="http://{{ORIGIN}}/",d={history:function(a,b){b=b||x();a.limit=a.limit||100;if(!a.channel)return o("Must Specify a Channel");a.channel=d.d+"/"+a.channel;m({url:k+"pubnub-history",data:a,b:function(c){b(c.messages)},c:function(c){o(c)}})},time:function(a){m({url:k+"pubnub-time",b:function(b){a(b.time)},c:function(){a(0)}})},uuid:function(a){m({url:k+
"pubnub-uuid",b:function(b){a(b.uuid)},c:function(){a(0)}})},publish:function(a,b){b=b||x()||a.callback;var c=a.message;if(!c)return o("Must Specify a Message");if(!a.channel)return o("Must Specify a Channel");c=JSON.stringify(c);if(c.length>1700)return o("Message exceeded limit 1700");if(!d.g)return o("Missing Publish Key");a.publish_key=d.g;a.channel=d.d+"/"+a.channel;a.message=c;m({url:k+"pubnub-publish",data:a,b:function(e){b(e)},c:function(e){b(e)}})},unsubscribe:function(a){a=d.d+"/"+a.channel;
if(a in d.a){d.a[a].disabled=1;d.a[a].e=0;d.a[a].f&&d.a[a].f(0)}},subscribe:function(a,b){function c(){setTimeout(function(){v*=2;m({url:k+"pubnub-subscribe",data:a,b:function(q){q&&q.server?e(q.server):c()},c:function(){c()}})},v)}function e(q){if(!(n in d.a&&d.a[n].disabled))d.a[n].f=m({url:"http://"+q+"/",data:{channel:n,timetoken:j},b:function(w){j=w.timetoken;e(q);w.messages[0]!="xdr.timeout"&&i(w.messages,function(t){b(t)})},c:function(w){w=="timeout"?e(q):c()}})}if(!a.channel)return o("Must Specify a Channel");
b=b||a.callback;if(!b)return o("Must Specify a Callback");if(!d.d)return o("Missing Subscribe Key");var j=0,v=100,n=a.channel=d.d+"/"+a.channel;n in d.a||(d.a[n]={});if(d.a[n].e)return o("Already Connected to this Channel: "+n);d.a[n].disabled=0;d.a[n].e=1;c()},g:"{{pub_key}}",d:"{{sub_key}}",i:"{{app_key}}",a:{},each:i,map:function(a,b){var c=[];i(a||[],function(e,j){c.push(b(e,j))});return c},css:function(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>
0?"px":"")}catch(e){}},$:function(a){return document.getElementById(a)},create:f,bind:r,supplant:function(a,b){return a.replace(E,function(c,e){return""+b[e]||""})},head:g,search:z,attr:function(a,b,c){if(c)a.setAttribute(b,c);else return a&&a.getAttribute&&a.getAttribute(b)},now:s};y({url:k+"pubnub-x-origin",b:function(a){if(a["x-origin"])l=1}});this.jQuery&&(this.jQuery.PUBNUB=d);this.PUBNUB=d}();
