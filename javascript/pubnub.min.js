function w(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function r(h){return h<10?"0"+h:h}function B(h){y.lastIndex=0;return y.test(h)?'"'+h.replace(y,function(o){var f=D[o];return typeof f==="string"?f:"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function n(h,o){var f,l,j,z,x=g,k,d=o[h];if(d&&typeof d==="object"&&typeof d.toJSON==="function")d=d.toJSON(h);if(typeof q==="function")d=q.call(o,h,d);switch(typeof d){case "string":return B(d);case "number":return isFinite(d)?String(d):
"null";case "boolean":case "null":return String(d);case "object":if(!d)return"null";g+=A;k=[];if(Object.prototype.toString.apply(d)==="[object Array]"){z=d.length;for(f=0;f<z;f+=1)k[f]=n(f,d)||"null";j=k.length===0?"[]":g?"[\n"+g+k.join(",\n"+g)+"\n"+x+"]":"["+k.join(",")+"]";g=x;return j}if(q&&typeof q==="object"){z=q.length;for(f=0;f<z;f+=1){l=q[f];if(typeof l==="string")if(j=n(l,d))k.push(B(l)+(g?": ":":")+j)}}else for(l in d)if(Object.hasOwnProperty.call(d,l))if(j=n(l,d))k.push(B(l)+(g?": ":":")+
j);j=k.length===0?"{}":g?"{\n"+g+k.join(",\n"+g)+"\n"+x+"}":"{"+k.join(",")+"}";g=x;return j}}window.JSON||(window.JSON={});if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var y=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,A,D={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;if(typeof JSON.stringify!=="function")JSON.stringify=function(h,o,f){var l;A=g="";if(typeof f==="number")for(l=0;l<f;l+=1)A+=" ";else if(typeof f==="string")A=f;if((q=o)&&typeof o!=="function"&&(typeof o!=="object"||typeof o.length!=="number"))throw Error("JSON.stringify");return n("",
{"":h})};if(typeof JSON.parse!=="function")JSON.parse=function(h){return eval("("+h+")")}}();
window.PUBNUB||function(){window.console||(window.console=window.console||{});console.log||(console.log=(window.opera||{}).postError||w());function r(){return++B+""+ +new Date}var B=1;function n(a){console.log(a)}function y(a){var b=[];g(a.split(/\s+/),function(c){g(document.getElementsByTagName(c),function(e){b.push(e)})});return b}function g(a,b){if(a&&b)if(typeof a[0]!="undefined")for(var c=0,e=a.length;c<e;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],
c,a[c])}function A(a,b){b.call(a,a);for(a=a.firstChild;a;){A(a,b);a=a.nextSibling}}var D=/\$?{([\w\-]+)}/g;function q(a,b,c){function e(i){if(!i)i=window.event;if(!c(i)){i.cancelBubble=true;i.returnValue=false;if(i.stopPropagation){i.stopPropagation();i.preventDefault()}}}if(b.addEventListener)b.addEventListener(a,e,false);else if(b.attachEvent)b.attachEvent("on"+a,e);else b["on"+a]=e}function h(){return y("head")[0]}function o(a,b){if(!a)return"";var c=[],e="";for(e in a)c.push(escape(e)+"="+escape(a[e]));
return(b.indexOf("?")===-1?"?":"&")+c.join("&")}function f(a){return document.createElement(a)}var l=0;function j(a){if(l)return x(a);var b=f("script"),c="x"+r(),e=100,i=setTimeout(function(){C("timeout")},a.timeout||3E4),u=a.url,m=a.data||{},p=a.c||w(),v=a.b||w();function s(){setTimeout(function(){e*=2;try{var t=h(),E=t.firstChild;E?t.insertBefore(b,E):t.appendChild(b)}catch(F){s()}},e)}function C(t){clearTimeout(i);if(b){t&&p.call(t,b,unescape(b.src));b.onerror=null;try{h().removeChild(b)}catch(E){}}}
b.async="async";window[c]=function(t){if(!t)return C("no data");v.call(b,t);window[c]=null;C(0)};q("error",b,function(){C("error")});m.unique=c;b.src=u+o(m,u);s();return C}var z=/^window\[[^\]]+\]\((.+?)\)$/;function x(a){var b=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,c=a.c||w(),e=a.b||w(),i=0,u=a.data||{},m=a.url,p=setInterval(function(){if(b&&b.readyState==4&&!i){var s=b.status;i=1;if(p){clearInterval(p);p=null}s>=200&&s<300||s==304||s==1223?e(JSON.parse(b.responseText.replace(z,
"$1"))):c(b);b=null}},14);u.unique="x"+r();try{b.open("GET",m+o(u,m),true);b.send()}catch(v){l=0;return j(a)}return function(){i=1;b&&b.abort&&b.abort()}}var k="http://{{ORIGIN}}/",d={history:function(a,b){b=b||w();a.limit=a.limit||100;if(!a.channel)return n("Must Specify a Channel");a.channel=d.d+"/"+a.channel;j({url:k+"pubnub-history",data:a,b:function(c){b(c.messages)},c:function(c){n(c)}})},time:function(a){j({url:k+"pubnub-time",b:function(b){a(b.time)},c:function(){a(0)}})},uuid:function(a){j({url:k+
"pubnub-uuid",b:function(b){a(b.uuid)},c:function(){a(0)}})},publish:function(a,b){b=b||w()||a.callback;var c=a.message;if(!c)return n("Must Specify a Message");if(!a.channel)return n("Must Specify a Channel");c=JSON.stringify(c);if(c.length>1700)return n("Message exceeded limit 1700");if(!d.g)return n("Missing Publish Key");a.publish_key=d.g;a.channel=d.d+"/"+a.channel;a.message=c;j({url:k+"pubnub-publish",data:a,b:function(e){b(e)},c:function(e){b(e)}})},unsubscribe:function(a){a=d.d+"/"+a.channel;
if(a in d.a){d.a[a].disabled=1;d.a[a].e=0;d.a[a].f&&d.a[a].f(0)}},h:0,i:[],subscribe:function(a,b){function c(){setTimeout(function(){u*=2;j({url:k+"pubnub-subscribe",data:a,b:function(p){p&&p.server?e(p.server):c()},c:function(){c()}})},u)}function e(p){if(!(m in d.a&&d.a[m].disabled))d.a[m].f=j({url:"http://"+p+"/",data:{channel:m,timetoken:i},b:function(v){i=v.timetoken;e(p);v.messages[0]!="xdr.timeout"&&g(v.messages,function(s){b(s)})},c:function(v){v=="timeout"?e(p):c()}})}if(!d.h)return d.i.push([a,
b]);if(!a.channel)return n("Must Specify a Channel");b=b||a.callback;if(!b)return n("Must Specify a Callback");if(!d.d)return n("Missing Subscribe Key");var i=0,u=100,m=a.channel=d.d+"/"+a.channel;m in d.a||(d.a[m]={});if(d.a[m].e)return n("Already Connected to this Channel: "+m);d.a[m].disabled=0;d.a[m].e=1;c()},g:"{{pub_key}}",d:"{{sub_key}}",j:"{{app_key}}",a:{},xdr:j,each:g,map:function(a,b){var c=[];g(a||[],function(e,i){c.push(b(e,i))});return c},css:function(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=
b[c]+("|width|height|top|left|".indexOf(c)>0?"px":"")}catch(e){}},$:function(a){return document.getElementById(a)},create:f,bind:q,supplant:function(a,b){return a.replace(D,function(c,e){return""+b[e]||""})},head:h,search:y,attr:function(a,b,c){if(c)a.setAttribute(b,c);else return a&&a.getAttribute&&a.getAttribute(b)},now:r};x({url:k+"pubnub-x-origin",b:function(a){if(a["x-origin"])l=1}});q("load",window,function(){setTimeout(function(){d.h=1;g(d.i,function(a){d.subscribe(a[0],a[1])})},100)});window.jQuery&&
(window.jQuery.PUBNUB=d);window.PUBNUB=d}();
