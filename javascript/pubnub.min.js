function w(){return function(){}}
this.JSON||function(){function r(g){return g<10?"0"+g:g}function x(g){o.lastIndex=0;return o.test(g)?'"'+g.replace(o,function(i){var f=z[i];return typeof f==="string"?f:"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function j(g,i){var f,h,e,a,b=k,c,d=i[g];if(d&&typeof d==="object"&&typeof d.toJSON==="function")d=d.toJSON(g);if(typeof n==="function")d=n.call(i,g,d);switch(typeof d){case "string":return x(d);case "number":return isFinite(d)?String(d):"null";case "boolean":case "null":return String(d);
case "object":if(!d)return"null";k+=u;c=[];if(Object.prototype.toString.apply(d)==="[object Array]"){a=d.length;for(f=0;f<a;f+=1)c[f]=j(f,d)||"null";e=c.length===0?"[]":k?"[\n"+k+c.join(",\n"+k)+"\n"+b+"]":"["+c.join(",")+"]";k=b;return e}if(n&&typeof n==="object"){a=n.length;for(f=0;f<a;f+=1){h=n[f];if(typeof h==="string")if(e=j(h,d))c.push(x(h)+(k?": ":":")+e)}}else for(h in d)if(Object.hasOwnProperty.call(d,h))if(e=j(h,d))c.push(x(h)+(k?": ":":")+e);e=c.length===0?"{}":k?"{\n"+k+c.join(",\n"+k)+
"\n"+b+"}":"{"+c.join(",")+"}";k=b;return e}}this.JSON={};if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var v=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,u,z={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof JSON.stringify!=="function")JSON.stringify=function(g,i,f){var h;u=k="";if(typeof f==="number")for(h=0;h<f;h+=1)u+=" ";else if(typeof f==="string")u=f;if((n=i)&&typeof i!=="function"&&(typeof i!=="object"||typeof i.length!=="number"))throw Error("JSON.stringify");return j("",
{"":g})};if(typeof JSON.parse!=="function")JSON.parse=function(g,i){function f(e,a){var b,c,d=e[a];if(d&&typeof d==="object")for(b in d)if(Object.hasOwnProperty.call(d,b)){c=f(d,b);if(c!==undefined)d[b]=c;else delete d[b]}return i.call(e,a,d)}var h;g=String(g);v.lastIndex=0;if(v.test(g))g=g.replace(v,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){h=eval("("+g+")");return typeof i==="function"?f({"":h},""):h}throw new SyntaxError("JSON.parse");}}();
this.PUBNUB||function(){this.console||(this.console=this.console||{});console.log||(console.log=(this.opera||{}).postError||w());function r(){return++x+""+ +new Date}var x=1;function j(a){console.log(a)}function v(a){var b=[];o(a.split(/\s+/),function(c){o(document.getElementsByTagName(c),function(d){b.push(d)})});return b}function o(a,b){if(a&&b)if(a[0])for(var c=0,d=a.length;c<d;)b.call(a[c],a[c],c++);else for(c in a)a.hasOwnProperty&&a.hasOwnProperty(c)&&b.call(a[c],c,a[c])}function k(a,b){b.call(a,
a);for(a=a.firstChild;a;){k(a,b);a=a.nextSibling}}var u=/\${([\w\-]+)}/g;function z(a,b,c){function d(l){if(!c(l)){l.cancelBubble=true;l.returnValue=false;if(l.stopPropagation){l.stopPropagation();l.preventDefault()}}}if(b.addEventListener)b.addEventListener(a,d,false);else if(b.attachEvent)b.attachEvent("on"+a,d);else b["on"+a]=d}function n(){return v("head")[0]}function g(a,b){if(!a)return"";var c=[],d="";for(d in a)c.push(escape(d)+"="+escape(a[d]));return(b.indexOf("?")===-1?"?":"&")+c.join("&")}
function i(a){return document.createElement(a)}function f(a){var b=i("script"),c=r(),d=100,l=setTimeout(function(){t("timeout")},a.timeout||3E4),y=a.data||{},m=a.b||w(),p=a.c||w();function s(){setTimeout(function(){d*=2;try{var q=n(),A=q.firstChild;A?q.insertBefore(b,A):q.appendChild(b)}catch(B){s()}},d)}function t(q){clearTimeout(l);if(b){q&&m.call(q,b,unescape(b.src));b.onerror=null;try{n().removeChild(b)}catch(A){}}}b.async="async";this[c]=function(q){if(!q)return t("no data");p.call(b,q);this[c]=
null;t(0)};z("error",b,function(){t("error")});y.unique=c;b.src=a.url+g(y,a.url);s();return t}var h="http://{{ORIGIN}}/",e={history:function(a,b){b=b||w();a.limit=a.limit||10;if(!a.channel)return j("Must Specify a Channel");a.channel=e.d+"/"+a.channel;f({url:h+"pubnub-history",data:a,c:function(c){b(c.messages)},b:function(c){j(c)}})},time:function(a){f({url:h+"pubnub-time",c:function(b){a(b.time)},b:function(){a(0)}})},uuid:function(a){f({url:h+"pubnub-uuid",c:function(b){a(b.uuid)},b:function(){a(0)}})},
publish:function(a,b){b=b||w()||a.callback;var c=a.message;if(!c)return j("Must Specify a Message");if(!a.channel)return j("Must Specify a Channel");c=JSON.stringify(c);if(c.length>1700)return j("Message exceeded limit 1700");if(!e.g)return j("Missing Publish Key");a.publish_key=e.g;a.channel=e.d+"/"+a.channel;a.message=c;f({url:h+"pubnub-publish",data:a,c:function(d){b(d)},b:function(d){b(d)}})},unsubscribe:function(a){a=e.d+"/"+a.channel;if(a in e.a){e.a[a].disabled=1;e.a[a].e=0;e.a[a].f&&e.a[a].f(0)}},
subscribe:function(a,b){function c(){setTimeout(function(){y*=2;f({url:h+"pubnub-subscribe",data:a,c:function(p){p&&p.server?d(p.server):c()},b:function(){c()}})},y)}function d(p){if(!(m in e.a&&e.a[m].disabled))e.a[m].f=f({url:"http://"+p,data:{channel:m,timetoken:l},c:function(s){l=s.timetoken;d(p);s.messages[0]!="xdr.timeout"&&o(s.messages,function(t){b(t)})},b:function(s){s=="timeout"?d(p):c()}})}if(!a.channel)return j("Must Specify a Channel");b=b||a.callback;if(!b)return j("Must Specify a Callback");
if(!e.d)return j("Missing Subscribe Key");var l=1,y=100,m=a.channel=e.d+"/"+a.channel;m in e.a||(e.a[m]={});if(e.a[m].e)return j("Already Connected to this Channel: "+m);e.a[m].disabled=0;e.a[m].e=1;c()},g:"{{pub_key}}",d:"{{sub_key}}",h:"{{app_key}}",a:{},each:o,map:function(a,b){var c=[];o(a||[],function(d,l){c.push(b(d,l))});return c},css:function(a,b){for(var c in b)if(b.hasOwnProperty(c))a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0?"px":"")},$:function(a){return document.getElementById(a)},
create:i,bind:z,supplant:function(a,b){return a.replace(u,function(c,d){return""+b[d]||""})},head:n,search:v,attr:function(a,b,c){if(c)a.setAttribute(b,c);else return a.getAttribute&&a.getAttribute(b)},now:r};this.jQuery&&(this.jQuery.PUBNUB=e);this.PUBNUB=e}();
