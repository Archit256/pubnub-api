## www.pubnub.com - Pubnub realtime push service in the cloud. 
##
## USAGE PHP EXAMPLE:
## ==================
## More examples in the ./examples/ folder.

## -----------------------------------------
## Create Pubnub Client API (INITIALIZATION)
## -----------------------------------------
$pubnub = new Pubnub( 'YOUR-PUBLISH-KEY', 'YOUR-SUBSCRIBE-KEY' );

## ----------------------
## Send Message (PUBLISH)
## ----------------------
$info = $pubnub->publish(array(
    'channel' => 'hello_world', ## REQUIRED Channel to Send
    'message' => 'Hey World!'   ## REQUIRED Message String/Array
));

## Print Publish Response
var_dump($info);

## --------------------------
## Request Messages (HISTORY)
## --------------------------
$response = $pubnub->history(array(
    'channel' => 'hello_world', ## REQUIRED Channel to Send
    'limit'   => 100,           ## OPTIONAL Limit Number of Messages
    'age'     => 500            ## OPTIONAL Age Limit in Seconds
));

## Print History
var_dump($response);

## ----------------------------------
## Receive Message (SUBSCRIBE)
## PHP 5.3.0 ONLY. THIS WILL BLOCK!!!
## THIS WILL BLOCK. PHP 5.3.0 ONLY!!!
##
## PHP 5.2.0 --> use CREATE_FUNCTION
##               for 'callback'
##
## ----------------------------------
$pubnub->subscribe(array(
    'channel'  => 'hello_world',        ## REQUIRED Channel to Listen
    'callback' => function($response) { ## REQUIRED Callback With Response
        var_dump($response); ## Print Response with Messages
        return true;         ## Keep listening (return false to stop)
    }
));

## ----------------------------------
## Receive Message (SUBSCRIBE)
## PHP 5.2.0 ONLY. THIS WILL BLOCK!!!
## THIS WILL BLOCK. PHP 5.2.0
## ----------------------------------
$pubnub->subscribe(array(
    'channel'  => 'hello_world',        ## REQUIRED Channel to Listen
    'callback' => create_function(      ## REQUIRED PHP 5.2.0 Method
        '$response',
        'var_dump($response); return true;'
    )
));
