## www.pubnub.com - PubNub realtime push service in the cloud. 
##
## USAGE PHP EXAMPLE:
## ==================
## More examples in the ./examples/ folder.

## -----------------------------------------
## Create Pubnub Client API (INITIALIZATION)
## -----------------------------------------
$pubnub = new Pubnub( 'YOUR-PUBLISH-KEY', 'YOUR-SUBSCRIBE-KEY' );

## ----------------------
## Send Message (PUBLISH)
## ----------------------
$info = $pubnub->publish(array(
    'channel' => 'hello_world', ## REQUIRED Channel to Send
    'message' => 'Hey World!'   ## REQUIRED Message String/Array
));
echo($info['status']);          ## 200 if successful.

## --------------------------
## Request Messages (HISTORY)
## --------------------------
$messages = $pubnub->history(array(
    'channel' => 'hello_world',  ## REQUIRED Channel to Send
    'limit'   => 100             ## OPTIONAL Limit Number of Messages
));
var_dump($messages);             ## Prints array of messages.

## ----------------------------------
## Receive Message (SUBSCRIBE)
## PHP 5.3.0 ONLY. THIS WILL BLOCK!!!
## THIS WILL BLOCK. PHP 5.3.0 ONLY!!!
## ----------------------------------
$pubnub->subscribe(array(
    'channel'  => 'hello_world',        ## REQUIRED Channel to Listen
    'callback' => function($message) {  ## REQUIRED Callback With Response
        var_dump($message);  ## Print Message
        return true;         ## Keep listening (return false to stop)
    }
));

## ----------------------------------
## Receive Message (SUBSCRIBE)
## PHP 5.2.0 ONLY. THIS WILL BLOCK!!!
## THIS WILL BLOCK. PHP 5.2.0
## ----------------------------------
$pubnub->subscribe(array(
    'channel'  => 'hello_world',        ## REQUIRED Channel to Listen
    'callback' => create_function(      ## REQUIRED PHP 5.2.0 Method
        '$message',
        'var_dump($message); return true;'
    )
));
